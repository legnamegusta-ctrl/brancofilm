
/* Design System Tokens */
:root {
  --bg:#F7F8FB;
  --card:#FFFFFF;
  --border:#E6E8F0;
  --text:#0F172A;
  --muted:#6B7280;
  --accent:#2563EB;
  --info:#3B82F6;
  --warning:#F59E0B;
  --success:#10B981;
  --danger:#EF4444;
  --radius-sm:8px;
  --radius-md:12px;
  --shadow-xs:0 1px 1px rgba(16,24,40,.04);
  --shadow-sm:0 1px 2px rgba(16,24,40,.06);
  --shadow-md:0 4px 12px rgba(16,24,40,.08);
  --space-1:4px;
  --space-2:8px;
  --space-3:12px;
  --space-4:16px;
  --space-5:20px;
  --space-6:24px;
  --space-7:32px;
  --space-8:40px;
  --space-9:48px;
  --font-12:0.75rem;
  --font-14:0.875rem;
  --font-16:1rem;
  --font-18:1.125rem;
  --font-20:1.25rem;
  --font-24:1.5rem;
  --font-28:1.75rem;
  --font-32:2rem;
  --lh-title:1.4;
  --lh-body:1.6;
  --z-topbar:40;
  --z-sidebar:30;
  --z-toast:90;
  --z-modal:100;
  --container:1200px;
  --accent-rgb:37,99,235;
}
[data-theme="dark"] {
  --bg:#0B1220;
  --card:#111827;
  --border:#1F2937;
  --text:#E7EAF3;
  --muted:#9CA3AF;
  --accent:#3B82F6;
  --accent-rgb:59,130,246;
}

/* Resets & base */
*{box-sizing:border-box;margin:0;padding:0;}
html{font-size:16px;}
body{background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,sans-serif;line-height:var(--lh-body);} 
a{color:var(--accent);text-decoration:none;}
img{max-width:100%;display:block;}
button{font:inherit;background:none;border:none;color:inherit;cursor:pointer;}
input,select,textarea{font:inherit;}

/* Utilities */
.hidden{display:none;}
.flex{display:flex;}
.grid{display:grid;gap:var(--space-3);}
.stack{display:flex;flex-direction:column;}
.gap-sm{gap:var(--space-2);}
.gap-md{gap:var(--space-4);}
.mt{margin-top:var(--space-3);}
.mt-sm{margin-top:var(--space-2);}
.mt-md{margin-top:var(--space-4);}
.mb-lg{margin-bottom:var(--space-6);}
.mx-auto{margin-left:auto;margin-right:auto;}
.text-sm{font-size:var(--font-14);}
.muted{color:var(--muted);}
.container-sm{max-width:520px;margin:0 auto;}
.container-md{max-width:640px;margin:0 auto;}
.container-lg{max-width:768px;margin:0 auto;}
.input-icon{position:relative;}
.input-icon svg{position:absolute;left:8px;top:50%;transform:translateY(-50%);width:16px;height:16px;color:var(--muted);}
.input-icon .input{padding-left:32px;}
.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0;}

/* Components */
.btn{display:inline-flex;align-items:center;justify-content:center;height:40px;padding:0 var(--space-4);border-radius:var(--radius-sm);font-weight:600;border:1px solid transparent;gap:var(--space-2);transition:background .15s;cursor:pointer;}
.btn:disabled{opacity:.5;cursor:not-allowed;}
.btn:focus-visible{outline:2px solid transparent;box-shadow:0 0 0 3px rgba(var(--accent-rgb),.3);}
.btn-primary{background:var(--accent);color:#fff;}
.btn-secondary{background:var(--card);border-color:var(--border);color:var(--text);}
.btn-ghost{background:transparent;color:var(--text);}
.btn-danger{background:var(--danger);color:#fff;}
.link{background:none;border:none;color:var(--accent);padding:0;cursor:pointer;}
.spinner{width:16px;height:16px;border:2px solid currentColor;border-bottom-color:transparent;border-radius:50%;animation:spin 1s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}

.input{width:100%;height:40px;padding:0 var(--space-3);border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--card);color:var(--text);line-height:1;}
.input::placeholder{color:var(--muted);}
.input:focus{outline:2px solid transparent;border-color:var(--accent);box-shadow:0 0 0 3px rgba(var(--accent-rgb),.3);}
textarea.input{height:auto;padding-top:var(--space-2);padding-bottom:var(--space-2);}

.form-grid{display:grid;gap:var(--space-4);grid-template-columns:repeat(auto-fit,minmax(240px,1fr));}
.form-row.full{grid-column:1/-1;}
.form-row.actions{display:flex;justify-content:flex-end;gap:var(--space-3);}

.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius-md);box-shadow:var(--shadow-sm);padding:var(--space-4);margin-bottom:var(--space-4);}
.card-header{font-size:var(--font-18);font-weight:600;margin-bottom:var(--space-3);}
.card-body{margin-bottom:var(--space-3);}
.card-actions{display:flex;justify-content:flex-end;gap:var(--space-3);}

.badge{display:inline-block;padding:0 var(--space-2);border-radius:var(--radius-sm);font-size:var(--font-12);line-height:1.6;font-weight:600;color:#fff;}
.badge.info{background:var(--info);}
.badge.warning{background:var(--warning);}
.badge.success{background:var(--success);}
.badge.danger{background:var(--danger);}

.tabs{display:flex;gap:var(--space-3);border-bottom:1px solid var(--border);}
.tab-btn{padding:var(--space-2) var(--space-3);border:none;background:none;color:var(--muted);}
.tab-btn[aria-selected="true"],.tab-btn.active{color:var(--accent);border-bottom:2px solid var(--accent);}

.table{width:100%;border-collapse:collapse;font-size:var(--font-14);}
.table th,.table td{padding:0 var(--space-3);height:44px;border-bottom:1px solid var(--border);text-align:left;}
.table.listrada tbody tr:nth-child(even){background:var(--bg);}
.table.compact th,.table.compact td{padding:0 var(--space-2);}
.table.sticky thead th{position:sticky;top:0;background:var(--card);}

.toast-stack{position:fixed;bottom:var(--space-4);right:var(--space-4);display:flex;flex-direction:column;gap:var(--space-2);z-index:var(--z-toast);}
.toast{background:var(--card);border:1px solid var(--border);border-radius:var(--radius-sm);box-shadow:var(--shadow-md);padding:var(--space-3) var(--space-4);}

.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.4);backdrop-filter:blur(2px);z-index:var(--z-modal);}
.modal>.card{width:100%;max-width:480px;}

.empty-state{text-align:center;color:var(--muted);padding:var(--space-6) 0;}
.skeleton{background:var(--border);border-radius:4px;animation:pulse 1.5s infinite;}
@keyframes pulse{0%{opacity:1;}50%{opacity:.4;}100%{opacity:1;}}

/* Page patterns */
.topbar{height:56px;display:flex;align-items:center;gap:var(--space-4);padding:0 var(--space-4);background:var(--card);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:var(--z-topbar);}
.sidebar{position:fixed;top:56px;bottom:0;width:248px;padding:var(--space-4);background:var(--card);border-right:1px solid var(--border);overflow-y:auto;z-index:var(--z-sidebar);}
.sidebar .nav-group{margin-bottom:var(--space-5);}
.nav-group h3{font-size:var(--font-12);text-transform:uppercase;color:var(--muted);margin-bottom:var(--space-2);}
.nav-group a{display:block;padding:var(--space-2) var(--space-3);border-radius:var(--radius-sm);color:var(--text);}
.nav-group a.active{color:var(--accent);background:rgba(var(--accent-rgb),.1);border-left:3px solid var(--accent);}
.page-header{position:sticky;top:56px;margin-left:248px;background:var(--card);padding:var(--space-4);border-bottom:1px solid var(--border);}
.page-header h1{font-size:var(--font-24);font-weight:600;line-height:var(--lh-title);}
.main{margin-left:248px;padding:var(--space-4);max-width:var(--container);}
@media(max-width:768px){.sidebar{transform:translateX(-100%);transition:transform .2s;} .sidebar.open{transform:none;} .page-header,.main{margin-left:0;}}

/* Agenda & Kanban overrides */
.fc .fc-event{border:1px solid var(--border);border-radius:var(--radius-sm);padding:2px 4px;background:var(--accent);color:#fff;}
.kanban-board{display:flex;gap:var(--space-4);overflow-x:auto;}
.kanban-col{min-width:240px;background:var(--bg);border:1px solid var(--border);border-radius:var(--radius-sm);padding:var(--space-2);}
.kanban-col-header{font-weight:600;margin-bottom:var(--space-2);}
.kanban-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius-sm);padding:var(--space-2);margin-bottom:var(--space-2);box-shadow:var(--shadow-xs);}
.kanban-card.dragging{box-shadow:var(--shadow-md);}
